---
id: T29.2.9
title: Test Coverage Gap Analysis
plan: plan-2026-01-sprint-29-2-comprehensive-audit
type: feature
priority: P0
complexity: 35
status: done
sprint: 29.2
tags: [audit, testing, coverage]
depends_on: []
---

# Objective

Analyze test coverage gaps across the codebase.

# Acceptance Criteria

- [x] All modules inventoried
- [x] Coverage ratio calculated
- [x] Critical gaps identified
- [x] Recommendations documented

---

# Audit Findings

## Coverage Summary

| Metric | Value |
|--------|-------|
| Total modules | 132 |
| Modules with tests | 45 (34.1%) |
| Modules without tests | 68 (65.9%) |
| Test files | 113 |

## Critical Untested Modules (>500 lines)

| Module | Lines | Priority |
|--------|-------|----------|
| planning/commands.py | 2,138 | P0 |
| skills/cli_commands.py | 1,529 | P0 |
| trello/sync.py | 1,182 | P1 |
| commands/session.py | 990 | P0 |
| commands/core.py | 968 | P0 |
| trello/task_commands.py | 976 | P1 |
| orchestration/handoff.py | 904 | P1 |
| trello/commands.py | 874 | P1 |
| security/sandbox.py | 801 | P1 |
| core/config.py | 786 | P0 |

## Modules with Good Coverage

| Directory | Tested | Total | Coverage |
|-----------|--------|-------|----------|
| security/ | 6 | 10 | 60% |
| trello/ | 6 | 13 | 46% |
| orchestration/ | 11 | 12 | 92% |
| metrics/ | 7 | 7 | 100% |

## Modules with No Coverage

| Directory | Untested | Notes |
|-----------|----------|-------|
| commands/ | 15 | All CLI commands |
| planning/ | 10 | Major gap |
| skills/ | 11 | Have module tests but no CLI |
| core/ | 8 | Infrastructure |

## Recommendations

### P0 - Must Fix

1. Add tests for commands/core.py (968 lines)
2. Add tests for commands/session.py (990 lines)
3. Add tests for planning/commands.py (2,138 lines)

### P1 - Should Fix

4. Add tests for all 15 command modules
5. Add CLI-level tests for skills commands
6. Add tests for core/config.py (786 lines)

### Target

- Current: 34% module coverage
- Target: 70% module coverage
- Effort: ~50-100 test files needed

---

## Summary

**Critical Gap:** 68 modules (65.9%) have no test coverage. Command modules are the largest gap - all 15 command files lack dedicated tests.
