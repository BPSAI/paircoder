---
id: T27.5
title: Fix upgrade to actually copy files
plan: plan-2025-12-sprint-27-stabilization
type: bugfix
priority: P0
complexity: 45
status: pending
sprint: 27
tags: [stabilization, bugfix, upgrade]
depends_on: [T27.4]
---

# Objective

Fix `bpsai-pair upgrade` to actually copy skills, agents, commands, and docs even when source files are found.

# Implementation Plan

1. Check what upgrade currently does
2. Implement copy logic for:
   - .claude/skills/
   - .claude/agents/
   - .claude/commands/
   - .paircoder/capabilities.yaml
3. Use merge strategy (add new, keep existing) for directories
4. Use replace strategy for capabilities.yaml
5. Show summary of what was copied/skipped

# Acceptance Criteria

- [ ] `bpsai-pair upgrade` copies new skills
- [ ] `bpsai-pair upgrade` copies new agents
- [ ] `bpsai-pair upgrade` copies new commands
- [ ] `bpsai-pair upgrade` updates capabilities.yaml
- [ ] Existing customized files are NOT overwritten (unless --force)
- [ ] Summary shows what was copied/skipped

# Verification

```bash
# Create a test project
mkdir /tmp/test-upgrade && cd /tmp/test-upgrade
bpsai-pair init --preset minimal

# Remove some files to simulate old version
rm -rf .claude/skills/paircoder-task-lifecycle

# Run upgrade
bpsai-pair upgrade

# Verify files were copied
ls -la .claude/skills/
ls -la .claude/agents/
ls -la .claude/commands/
```
