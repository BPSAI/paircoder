---
id: T29.2.11
title: Config Field Usage Audit
plan: plan-2026-01-sprint-29-2-comprehensive-audit
type: feature
priority: P1
complexity: 30
status: done
sprint: 29.2
tags: [audit, config, cleanup]
depends_on: []
---

# Objective

Audit config field usage across the codebase to identify dead/unused fields and hardcoded values.

# Acceptance Criteria

- [x] All config fields inventoried
- [x] Usage counts documented
- [x] Dead fields identified
- [x] Recommendations documented

---

# Audit Findings

## Config Structure Summary

**Total Config Sections:** 17 top-level sections
**Total Fields:** ~95+ fields
**Actively Used:** ~75+ fields (79%)
**Dead/Unused:** 4 fields (4%)

## Dead Config Fields

| Field | Status | Notes |
|-------|--------|-------|
| `project.description` | Never used | Defined but never read |
| `workflow.plans_dir` | Never read | Hardcoded in loaders |
| `workflow.tasks_dir` | Never read | Hardcoded in loaders |
| `release.freshness_days` | Never read | Defined but not implemented |

## Heavily Used Sections (5+ refs)

| Section | References | Notes |
|---------|------------|-------|
| `trello.*` | 46 | Most heavily used |
| `hooks.*` | 12 | Hook execution |
| `metrics.*` | 9 | Metrics collection |
| `enforcement.*` | 8 | Gate enforcement |
| `version` | 8 | Version tracking |
| `estimation.*` | 7 | Complexity estimation |
| `routing.*` | 6 | Model routing |

## Config Loading Architecture Issue

**Two-Tier Loading System:**
1. **Config class** - Only loads basic project/workflow/pack settings
2. **Raw YAML access** - Used for everything else (trello, routing, hooks, etc.)

This split causes:
- No unified config access pattern
- Harder to track field usage
- Some modules must manually parse YAML

## Hardcoded Values That Should Be Config

| Value | Location | Recommendation |
|-------|----------|----------------|
| Model names | tools.py, tokens.py | Use `models.*` section |
| Token limits (200000) | tokens.py | Add `models.token_limits` |
| Pricing data | metrics/collector.py | Add `pricing` section |

## REQUIRED_SECTIONS Validation Issues

```python
REQUIRED_SECTIONS = [
    "version", "project", "workflow", "pack", "flows",
    "routing", "trello", "estimation", "metrics", "hooks", "security"
]
```

**Issues:**
- `flows` - Required but never used anywhere
- `security` - Required but not in default config.yaml
- `models` - Not required but should be

## Recommendations

### P0 - Should Fix

1. Remove or implement `flows` section (dead code)
2. Add `security` to default config or remove from requirements
3. Remove dead fields: `workflow.plans_dir`, `workflow.tasks_dir`

### P1 - Consider

4. Consolidate config loading into single typed interface
5. Move hardcoded model names to use `models.*` section
6. Add pricing to config

---

## Summary

**Config Health:** GOOD - 79% of fields actively used

4 dead fields identified. Main architectural concern is split config loading (Config class vs raw YAML). REQUIRED_SECTIONS includes `flows` which is completely unused.
