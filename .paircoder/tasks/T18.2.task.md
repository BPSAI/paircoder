---
id: T18.2
title: Create Release Prep Command
plan: plan-2025-12-sprint-18-release-engineering
type: feature
priority: P1
complexity: 40
status: done
depends_on:
- T18.1
tags:
- cli
- release
- automation
---

# Objective

Add `bpsai-pair release prep` command that verifies release readiness and generates tasks for missing items.

# Proposed CLI

```bash
bpsai-pair release prep --since v2.6.0

Release Checklist for v2.7.0:
  ✅ Version bumped in pyproject.toml
  ❌ CHANGELOG.md missing v2.7.0 entry
  ❌ Cookie cutter template drift detected
  ⚠️  README.md last updated 2025-12-15
  ✅ Tests passing

Generated tasks:
  - REL-18-01: Update CHANGELOG.md
  - REL-18-02: Sync cookie cutter template
```

# Checks to Implement

1. Version consistency (pyproject.toml matches __version__)
2. CHANGELOG has entry for current version
3. Cookie cutter template matches source files (use drift detection from TASK-169)
4. Documentation freshness (warn if >7 days old)
5. Test suite passing
6. No uncommitted changes

# Config Section

Add to `.paircoder/config.yaml`:

```yaml
release:
  version_source: pyproject.toml
  documentation:
    - CHANGELOG.md
    - README.md
    - docs/FEATURE_MATRIX.md
  cookie_cutter:
    template_path: tools/cli/bpsai_pair/data/cookiecutter-paircoder
    sync_required: true
```

# Acceptance Criteria

- [x] `bpsai-pair release prep` command exists
- [x] Detects version mismatches between pyproject.toml and __version__
- [x] Detects missing CHANGELOG entries for current version
- [ ] Integrates with cookie cutter drift detection (T18.3) - deferred to T18.3
- [x] Generates release tasks automatically for missing items
- [x] Config section in config.yaml for customization
- [x] `--since` flag for comparison baseline (git tag)
- [x] Clear output with status icons (✅ ❌ ⚠️)

# Files to Create/Modify

- `tools/cli/bpsai_pair/commands/release.py` (new)
- `tools/cli/bpsai_pair/cli.py` (register command)
- `.paircoder/config.yaml` (add release section)
- `tests/commands/test_release.py` (new)

# Dependencies

- T18.1 (version fix) - should be done first for consistency check to work
- T18.3 (template check) - can develop in parallel, integrate after