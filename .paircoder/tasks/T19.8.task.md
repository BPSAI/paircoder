---
id: T19.8
title: ttask done Should Verify/Auto-Check Acceptance Criteria
plan: plan-2025-12-sprint-19-methodology
type: feature
priority: P1
complexity: 45
status: done
depends_on: []
tags:
- trello
- workflow
- acceptance-criteria
---

# Objective

When completing Trello tasks with `ttask done`, verify acceptance criteria checklist items. Prevent tasks marked "done" with unchecked AC items.

# Root Cause (Sprint 18 Incident)

Tasks were completed without:
- AC checklist items being checked off
- Trello cards being moved properly
- Velocity/timer hooks firing

# Implementation

Add AC verification to `ttask done`:

```bash
# Default: warns if AC incomplete
bpsai-pair ttask done CARD-123 --summary "Done"
# â†’ Error: 2 of 4 acceptance criteria unchecked

# Auto-check all AC items (recommended)
bpsai-pair ttask done CARD-123 --summary "Done" --check-all

# Force complete without checking (escape hatch)
bpsai-pair ttask done CARD-123 --summary "Done" --force
```

## Behavior

1. Fetch card checklists
2. Find "Acceptance Criteria" checklist (case-insensitive)
3. If unchecked items and no flags: block with list
4. `--check-all`: check all AC items, then complete
5. `--force`: skip verification (logs warning)

# Acceptance Criteria

- [ ] `ttask done` fetches card checklists before completion
- [ ] Identifies "Acceptance Criteria" checklist (case-insensitive)
- [ ] If unchecked items and no flags: shows warning, lists items, exits
- [ ] `--check-all` flag checks all AC items then completes
- [ ] `--force` flag skips AC verification
- [ ] Works with cards that have no checklists (no-op)
- [ ] Completion comment mentions AC status
- [ ] Unit tests for all scenarios

# Files to Modify

- `src/bpsai_pair/trello/cli_commands.py`
- `src/bpsai_pair/trello/api.py`
- `tests/test_ttask_commands.py`

# Dependencies

None