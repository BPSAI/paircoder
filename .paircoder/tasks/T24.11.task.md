---
id: T24.11
title: Merge flows/parser.py + flows/parser_v2.py
type: refactor
status: done
priority: P0
complexity: 35
plan: plan-2025-12-sprint-25-epic003-token-budget
effort: M
---

# T24.11: Merge flows/parser.py + flows/parser_v2.py

## Objective

Consolidate the two flow parser implementations into a single unified parser, completing EPIC-003 Phase 4 (Parser Consolidation).

## Context

Currently there are two flow parser files:
- `flows/parser.py` - Original v1 parser
- `flows/parser_v2.py` - Updated v2 parser

This duplication creates confusion and maintenance overhead. We need a single authoritative parser.

## Acceptance Criteria

- [ ] Analyze both parsers to identify differences and canonical version
- [ ] Create unified `flows/parser.py` combining best of both
- [ ] Delete `flows/parser_v2.py` after merge
- [ ] All existing .flow.md files still parse correctly
- [ ] All flow-related tests pass
- [ ] No backward compatibility breaks

## Files to Modify

- `bpsai_pair/flows/parser.py` - Unified parser
- `bpsai_pair/flows/parser_v2.py` - Delete after merge

## Dependencies

None - this is the first task in Phase 4.

## Notes

Preserve git history by using appropriate merge strategy. Ensure both v1 and v2 flow formats remain supported for backward compatibility.