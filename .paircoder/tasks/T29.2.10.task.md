---
id: T29.2.10
title: Monolithic Module Assessment
plan: plan-2026-01-sprint-29-2-comprehensive-audit
type: feature
priority: P1
complexity: 25
status: done
sprint: 29.2
tags: [audit, refactor, epic-005]
depends_on: []
---

# Objective

Identify monolithic modules requiring decomposition for EPIC-005.

# Acceptance Criteria

- [x] Files >500 lines identified
- [x] Decomposition candidates prioritized
- [x] Refactoring plan created
- [x] EPIC-005 scope defined

---

# Audit Findings

## Files Over 500 Lines (30 total)

### Top 10 Monolithic Files

| Rank | File | Lines | Status |
|------|------|-------|--------|
| 1 | planning/commands.py | 2,138 | CRITICAL |
| 2 | skills/cli_commands.py | 1,529 | CRITICAL |
| 3 | trello/sync.py | 1,182 | HIGH |
| 4 | commands/session.py | 990 | HIGH |
| 5 | trello/task_commands.py | 976 | HIGH |
| 6 | commands/core.py | 968 | MEDIUM |
| 7 | orchestration/handoff.py | 904 | MEDIUM |
| 8 | trello/commands.py | 874 | MEDIUM |
| 9 | security/sandbox.py | 801 | MEDIUM |
| 10 | core/config.py | 786 | MEDIUM |

## EPIC-005 Decomposition Plan

### Phase 1: Command Files (Sprint 29.3)

**planning/commands.py (2,138 lines) → Split into:**
- planning/plan_commands.py (plan new, list, show, tasks, status)
- planning/task_commands.py (task list, show, update, etc.)
- planning/trello_sync.py (sync-trello logic)
- planning/archive_commands.py (archive, restore, cleanup)
- planning/intent_commands.py (intent detect, should-plan)
- planning/standup_commands.py (standup generate, post)

**skills/cli_commands.py (1,529 lines) → Split into:**
- skills/validate_commands.py
- skills/export_commands.py
- skills/gap_commands.py
- skills/subagent_commands.py

### Phase 2: Integration Files (Sprint 29.4)

**trello/sync.py (1,182 lines) → Extract:**
- trello/sync_config.py
- trello/sync_helpers.py
- trello/conflict_resolver.py

**commands/session.py (990 lines) → Split into:**
- commands/session_commands.py
- commands/compaction_commands.py
- commands/containment_commands.py

### Target State

- No file exceeds 500 lines
- Each file has single responsibility
- 1:1 module-to-test mapping

## Decomposition Benefits

1. **Maintainability:** Smaller files easier to understand
2. **Testability:** Focused modules easier to test
3. **Parallelism:** Multiple developers can work simultaneously
4. **Code Review:** Smaller PRs are easier to review

---

## Summary

**30 files exceed 500 lines.** Top 4 files (planning/commands.py, skills/cli_commands.py, trello/sync.py, commands/session.py) account for 5,839 lines and are priority targets for EPIC-005 decomposition.
