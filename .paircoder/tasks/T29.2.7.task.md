---
id: T29.2.7
title: Remaining Commands Audit
plan: plan-2026-01-sprint-29-2-comprehensive-audit
type: feature
priority: P2
complexity: 35
status: done
sprint: 29.2
tags: [audit, commands]
depends_on: []
---

# Objective

Audit all remaining CLI commands not covered in previous tasks.

# Acceptance Criteria

- [x] All remaining command files inventoried
- [x] Commands documented with line counts
- [x] Test coverage identified
- [x] Findings documented

---

# Audit Findings

## Command Files Summary (16 files, 5,379 lines)

| File | Lines | Commands |
|------|-------|----------|
| session.py | 990 | 10+ |
| core.py | 968 | 8 |
| metrics.py | 547 | 9 |
| upgrade.py | 535 | 1 |
| orchestrate.py | 381 | 7 |
| budget.py | 320 | 3 |
| security.py | 270 | 4 |
| state.py | 226 | 5 |
| config.py | 213 | 3 |
| timer.py | 199 | 5 |
| benchmark.py | 193 | 4 |
| preset.py | 149 | 3 |
| mcp.py | 127 | 3 |
| cache.py | 103 | 3 |
| audit.py | 98 | 3 |

## Commands by Category

### Preset (3 commands)
- `preset list`, `preset show`, `preset preview`

### Timer (5 commands)
- `timer start`, `stop`, `status`, `show`, `summary`

### Benchmark (4 commands)
- `benchmark run`, `results`, `compare`, `list`

### Cache (3 commands)
- `cache stats`, `clear`, `invalidate`

### Audit (3 commands)
- `audit bypasses`, `summary`, `clear`

### State (5 commands)
- `state show`, `history`, `list`, `reset`, `advance`

### Config (3 commands)
- `config validate`, `update`, `show`

### MCP (3 commands)
- `mcp serve`, `tools`, `test`

### Upgrade (1 command)
- `upgrade` (with --dry-run, --skills, etc.)

## Test Coverage

| File | Has Tests |
|------|-----------|
| budget.py | Yes (test_budget_commands.py) |
| All others | No dedicated tests |

## Issues

1. **15/16 command files lack test coverage**
2. **session.py (990 lines)** - Too large, no tests
3. **Missing release/sprint/github commands** - May be deprecated or in other files

## Recommendations

1. Add tests for all command modules
2. Split session.py into smaller modules
3. Document deprecated commands

---

## Summary

60+ commands across 16 files. Only budget.py has dedicated tests. Well-organized architecture but test gap is significant.
